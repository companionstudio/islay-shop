= resource_form(@promotion) do |f|
  = content do
    = f.fieldset(:class => 'primary') do
      = f.input(:name)
      = f.input(:start_at, :col => 'first-inline')
      = f.input(:end_at, :col => 'inline')

    = f.fieldset('Conditions') do
      = f.fields_for(:conditions) do |c|
        = c.fieldset(c.object.desc) do
          = c.hidden_field(:type)
          = c.input(:active, :as => 'boolean')
          - c.metadata do |attrs|
            - attrs.each do |name, opts|
              = c.metadata_input(name, opts)

    = f.fieldset('Effect') do
      = f.fields_for(:effects) do |e|
        = e.fieldset(e.object.desc) do
          = e.hidden_field(:type)
          = e.input(:active, :as => 'boolean')
          - e.metadata do |attrs|
            - attrs.each do |name, opts|
              = e.metadata_input(name, opts)

  = footer do
    %button Save
