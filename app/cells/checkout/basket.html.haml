= simple_form_for(@order, :url => public_order_basket_path) do |f|
  %table
    %thead
      %tr
        %th{:colspan => 2} Product
        %th.sub-total Price each
        %th.quantity Quantity
        %th.sub-total Sub-total

    %tbody
      = f.fields_for(:items) do |i|
        - item = i.object
        %tr
          %td.image
            .frame
              %a{:href => public_product_path(item.sku.product)} Image
          %td
            %a{:href => public_product_path(item.sku.product)}
              = item.sku.product.name
              %span.sku-description= item.sku.short_desc
          %td.price
            = item.formatted_price
          %td.quantity
            = i.input(:quantity)
            = i.hidden_field(:sku_id)
          %td.sub-total
            = item.formatted_total

    %tfoot
      %tr
        %th{:colspan => 4, :scope => 'row'}
          Sub-total
        %td.sub-total
          %span.product-total= @order.formatted_product_total
      %tr{:class => "#{@order.shipping_total == 0 ? 'free' : ''}"}
        %th{:colspan => 4, :scope => 'row'}
          Shipping
        %td.sub-total
          = @order.formatted_shipping_total
      %tr
        %th{:colspan => 4, :scope => 'row'}
          Amount to pay
        %td.total
          %span.grand-total= @order.formatted_total
      %tr.update
        %th{:colspan => 4, :scope => 'row'}
          Click update to see new totals
        %td.controls
          %button{:type => 'submit', :class => 'primary'} Update
